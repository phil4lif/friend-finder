<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


    <title>Friend Finder Survey</title>
</head>

<body>
    <div class="container">
        <h1>Please respond to the following with a range of 1 - 5, 1 for strongly disagree, and 5 for strongly agree.
        </h1>

        <div class="row">
            <form class="col s12">
              <div class="row">
                <div class="input-field col s6">
                  <i class="material-icons prefix">account_circle</i>
                  <input id="nameinput" type="text" class="validate">
                  <label for="nameinput">Name (Required)</label>
                </div>
                <div class="input-field col s6">
                  <i class="material-icons prefix">photo</i>
                  <input id="photoinput" type="tel" class="validate">
                  <label for="photoinput">Link to Photo (Required)</label>
                </div>
              </div>
            </form>
          </div>
        <div class="row">
            <div class="col s2">
                <p>You've been classified or labeled as a nerd.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q1" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>A great weekend away would include a tent and a sleeping bag.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q2" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>Your mind  is busy even when your body is not.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q3" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>You'd rather spend an hour reading up on a new skill or hobby than in a fitness club.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q4" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>A cross country roadtrip sounds better than a cruise on the high seas.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q5" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>You often daydream about the things that you want to do in the future.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q6" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>You would rather spend money on an activity or night out than a new outfit</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q7" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>You consider yourself a friend to all even animals.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q8" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>You've been known to shed a tear during an emotional scene in a movie or story.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q9" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <p>You consider yourself to be an environmentalist.</p>
                <form action="#">
                    <p class="range-field">
                        <input type="range" id="q10" min="1" max="5" />
                    </p>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s2">
                <a href="#modal1"  class="btn waves-effect waves-light modal-trigger"  name="action" id="submit">Submit
                    <i class="material-icons right">send</i>
                </a>
            </div>
        </div>
    </div>


<!-- Modal Structure -->
<div id="modal1" class="modal">
    <div class="modal-content">
      <h4 id="name"></h4>
      <img id="profileimage">
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
  </div>







    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
    $('.modal').modal();
  });
$("#submit").on("click", function (event) {
    console.log("submit");
    var newFriend = {
        name: $("#nameinput").val().trim(),
        photolink: $("#photoinput").val().trim(),
        responses: [
        $("#q1").val().trim(),
        $("#q2").val().trim(),
        $("#q3").val().trim(),
        $("#q4").val().trim(),
        $("#q5").val().trim(),
        $("#q6").val().trim(),
        $("#q7").val().trim(),
        $("#q8").val().trim(),
        $("#q9").val().trim(),
        $("#q10").val().trim()]
    };
    // var newResponse = parseInt($("#q1").val().trim())
    // console.log(newResponse);
    // console.log(newFriend.responses[0])
    for (var i = 0; i<newFriend.responses.length; i++){
        newFriend.responses[i]=parseInt(newFriend.responses[i])
    }
    console.log(newFriend.responses);
    $.post("/api/friends", newFriend)
        .then(function (data) {
            console.log(data)
            if (data) {
                // <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>
            $("#name").text(data.name)
            $("#profileimage").attr("src", data.photolink)

            }
        })
})
    </script>

</body>

</html>